# Spec 文档模板

根据文档类型选择合适的模板，填写具体信息，删除不需要的部分。

> Frontmatter 规范请参考 [plan-template.md](plan-template.md)。

---

## 1. 功能设计模板

```markdown
# [功能名称]设计方案

## 1. 概述

### 1.1 背景
[描述为什么需要这个功能]

### 1.2 目标
1. 目标 1
2. 目标 2

### 1.3 范围
**包含**：
- 功能点 1

**不包含**：
- 不在此次实现的功能

## 2. 需求分析

### 2.1 功能需求

#### FR-001: [需求名称]
**描述**：[详细描述]
**输入**：[输入项]
**输出**：[输出项]
**业务规则**：
1. 规则 1

### 2.2 非功能需求
- **性能要求**：[响应时间、吞吐量]
- **可靠性要求**：[可用性、容错性]

## 3. 设计方案

### 3.1 架构设计
[整体架构描述]

### 3.2 数据模型
[Pydantic/数据库模型定义]

### 3.3 接口设计
[方法签名、参数、返回值、异常]

## 4. 执行模式
[参考 plan-template.md 执行模式章节格式]

## 5. 实现步骤
- [ ] 阶段 1：基础实现
- [ ] 阶段 2：功能完善
- [ ] 阶段 3：测试和优化

## 6. 测试计划

| 测试用例 | 输入 | 预期输出 | 状态 |
|---------|------|---------|------|
| TC-001 | [输入] | [输出] | 待测试 |

## 7. 风险和依赖

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|---------|
| 风险1 | 高/中/低 | 高/中/低 | [措施] |

## 8. 文档关联
- 实现总结: [[summary|实现总结]] (待创建)
```

---

## 2. API 规范模板

```markdown
# [API 名称] 接口规范

## 1. 概述
- API 版本: v1.0
- 基础路径: `/api/v1`
- 认证方式: [JWT/API Key]

### 通用响应格式
```json
{"code": 200, "message": "Success", "data": {}, "timestamp": "ISO8601"}
```

## 2. 端点定义

### 2.1 [端点名称]
- **路径**: `/resource/{id}`
- **方法**: `GET`/`POST`/`PUT`/`DELETE`
- **认证**: 需要/不需要

**请求参数**：

| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| id | string | 是 | 资源ID |

**成功响应**：[JSON 示例]
**错误响应**：[JSON 示例]

## 3. 数据模型
[模型字段定义表格]

## 4. 错误码

| 错误码 | 描述 | 解决方案 |
|--------|------|---------|
| E001 | 参数缺失 | 检查必需参数 |

## 5. 文档关联
- 实现总结: [[summary|实现总结]] (待创建)
```

---

## 3. 数据模型设计模板

```markdown
# [模型名称]数据模型设计

## 1. 概述
- 模型用途: [应用场景]
- 设计原则: [列出]

## 2. 数据模型定义

### 2.1 核心模型

**Pydantic 定义**：
```python
class ModelName(BaseModel):
    # 系统预设字段
    id: str = Field(description="唯一标识符，系统生成")
    # Agent 填写字段
    name: str = Field(description="名称，Agent填写")
```

**字段说明**：

| 字段名 | 类型 | 必需 | 填写方 | 描述 |
|--------|------|------|--------|------|
| id | str | 是 | 系统 | 唯一标识符 |

**数据流转**：[创建→更新→完成的流转描述]

## 3. 关系模型
[模型关系图 + 关系说明]

## 4. 数据验证规则
[字段验证 + 业务规则]

## 5. 数据库映射
[表结构 SQL + 索引设计]

## 6. 文档关联
- 实现总结: [[summary|实现总结]] (待创建)
```

---

## 4. 架构设计模板

```markdown
# [系统/模块]架构设计

## 1. 概述
- 背景: [设计动机]
- 目标: [列出]
- 设计原则: [列出]

## 2. 系统架构

### 2.1 整体架构
[ASCII 架构图]

### 2.2 层次说明
[各层职责、技术栈、主要组件]

## 3. 组件设计
[各组件职责、接口、依赖]

## 4. 数据流
[主要数据流图 + 步骤说明]

## 5. 技术选型

| 技术领域 | 选型 | 理由 |
|---------|------|------|
| Web 框架 | FastAPI | 高性能、类型安全 |

## 6. 性能与安全
- 性能目标: [响应时间、并发、吞吐量]
- 安全措施: [列出]

## 7. 文档关联
- 实现总结: [[summary|实现总结]] (待创建)
```

---

## 5. 重构方案模板

```markdown
# [模块/功能]重构方案

## 1. 概述
- 重构背景: [为什么需要重构]
- 当前问题: [列出]
- 重构目标: [列出]

## 2. 现状分析
[当前实现描述 + 问题影响表格]

## 3. 重构方案
- 目标架构: [描述 + 代码示例]
- 改进点: [列出]

## 4. 实施计划
- [ ] 阶段 1：准备工作
- [ ] 阶段 2：核心重构
- [ ] 阶段 3：测试验证
- [ ] 阶段 4：部署上线
- 回滚方案: [描述]

## 5. 风险评估

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|---------|
| 风险1 | 高/中/低 | 高/中/低 | [措施] |

## 6. 文档关联
- 实现总结: [[summary|实现总结]] (待创建)
```
